<view class="page">
  <view class="hero card">
    <view class="hero__title">今日格斗资讯</view>
    <view class="hero__meta">最近更新：{{updatedAtText || '尚未更新'}}</view>
  </view>

  <view wx:if="{{loading}}" class="state card">
    <text class="state-text">正在加载资讯...</text>
  </view>

  <view wx:elif="{{error}}" class="state card">
    <text class="error-text">{{error}}</text>
    <button class="primary-button" bindtap="onRetryTap">重试</button>
  </view>

  <view wx:elif="{{!items.length}}" class="state card">
    <text class="state-text">当前暂无资讯</text>
  </view>

  <view wx:else class="list">
    <view class="article card" wx:for="{{items}}" wx:key="id">
      <image wx:if="{{item.cover_url}}" class="article__cover" src="{{item.cover_url}}" mode="aspectFill" />
      <view class="article__title">{{item.title}}</view>
      <view class="article__summary">{{item.summary}}</view>
      <video
        wx:if="{{item.can_play && item.video_url}}"
        class="article__video"
        src="{{item.video_url}}"
        controls
      />
      <button class="link" data-url="{{item.source_url}}" bindtap="onCopySourceTap">复制来源链接</button>
    </view>
  </view>
</view>
